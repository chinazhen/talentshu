<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>周易卜问（卜卦、问运） 深山无名道观</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/demo.css">
    <link rel="stylesheet" href="css/clock.css">
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
</head>
<body>
<div class="top">
    <div class="span-top">
        <div style="position: absolute;z-index: 99999">
            <ul>
                <li>姓名：<input id="name" type="text"> </li>
                <li>性别：
                    <select id="sexSelect">
                        <option value="男">男</option>
                        <option value="女">女</option>
                    </select>
                </li>
                <li>生日（农历）：
                    <select id="yearSelect"></select>&nbsp;年&nbsp;
                    <select id="monthSelect"></select>&nbsp;月&nbsp;
                    <select id="daySelect"></select>&nbsp;日&nbsp;
                    <select id="timeSelect"></select>&nbsp;点
                </li>
                <li><input id="submit" class="submitBtn" type="button" value="开始测算"></li>
            </ul>
        </div>
    </div>
    <div class="span-top">
    </div>
    <div class="span-top">
        <div>
            <div id="showDiv" style="display: none;">
                <span id="idStrSpan" class="title" ></span>
                <span class="information" id="information"></span>
                <span id="more" data-toggle="modal" data-target="#myModal" class="more">>>> 更多信息 <<<</span>
            </div>
        </div>
    </div>
    <div class="span-top"></div>
    <div class="span-top"></div>
    <div class="span-top"></div>
    <div class="span-top"></div>
    <div class="span-top"></div>
    <div class="span-top">	</div>
</div>
<div class="baGua" style="left: 620px;top: 45px; z-index: 99">
    <span style="position:relative;">乾</span>
</div>
<div class="baGua" style="left: 850px;top: 150px; z-index: 99">
    <span style="position:relative;">坤</span>
</div>
<div class="baGua" style="left: 910px;top: 325px; z-index: 99">
    <span style="position:relative;">震</span>
</div>
<div class="baGua" style="left: 860px;top: 500px; z-index: 99">
    <span style="position:relative;">巽</span>
</div>
<div class="baGua" style="left: 620px;top: 600px; z-index: 99">
    <span style="position:relative;">坎</span>
</div>
<div class="baGua" style="left: 380px;top: 500px; z-index: 99">
    <span style="position:relative;">离</span>
</div>
<div class="baGua" style="left: 320px;top: 320px; z-index: 99">
    <span style="position:relative;">艮</span>
</div>
<div class="baGua" style="left: 380px;top:150px; z-index: 99">
    <span style="position:relative;">兑</span>
</div>

<div class="modal fade" id="myModal" tabindex="-1" style="z-index: 999999999;" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">每天仅为8位有缘人详细化解苦难</h4>
            </div>
            <div class="modal-body">
                <p>输入您的测算ID：<input id="yuceId" type="text"></p>
                <p>微信号（大师互加）：<input id="wechat" type="text"></p>
                <p>手机号（详细结果）：<input id="mobile" type="text"></p>
                <p>施主施舍香油钱，与大师结缘，听大师亲自详解</p>
                <p><img src="img/wechat.png" style="margin-left:20%;width:300px;height:300px"></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">离去</button>
                <button type="button" id="sureBtn" disabled="disabled" class="btn btn-primary" data-dismiss="modal">确定结缘</button>
            </div>
        </div>
    </div>
</div>


<div id="clock"></div>
<script src="js/clock/jieqi.js"></script>
<script src="js/clock/date.js"></script>
<script>
    $(function () {
        initDate();
        init();
        setInterval(function() {runTime();}, 100);
        changePosition();
        setTimeout(function() {changeCircle();}, 2000);

        document.getElementById("submit").addEventListener('click', test, false);

        setInterval(function () {changeColor()},1000);

        $("#wechat").bind("input propertychange",function () {
            checkMobile();
        });

        $("#mobile").bind("input propertychange",function () {
            checkMobile();
        });

    });

    function test() {
        var name = $("#name").val();
        var sex =  $("#sexSelect").val();
        var year = $("#yearSelect").val();
        var month = $("#monthSelect").val();
        var day = $("#daySelect").val();
        var time = $("#timeSelect").val();

        if (!name) {
            alert("您好像还没输入您的贵姓呢 ！");
            $("#name").focus();
            return;
        }

        if (!sex) {
            alert("您还没有选择性别呢 ！");
            $("#sexSelect").focus();
            return;
        }

        if (!year || !month || !day) {
            alert("请准确填写你的出生时日 ！");
            $("#yearSelect").focus();
            return;
        }

        document.getElementById("submit").value = "正在计算 ...";

        setTimeout(function() {showInformation();}, 2000);
    }

    var yuceId;
    function showInformation() {
        $("#showDiv").css("display","block");
        $("#information").text("命运处于关键阶段，非历经磨难不得解脱，命有天罗困之。近年困难重重，想尽一切办法希望与希望总在一瞬间转换。" +
            "命范天罗带白虎，运阻于网外，无法逃脱。心情易怒，消极暴戾。若不能合理化解，恐有白虎变故，若能平安渡过往后道路必将万丈光芒 ~ ");
        $("#submit").val("开始测算");
        yuceId = randomString(8);
        $("#idStrSpan").text("预测ID:"+ yuceId +", 解析结果：");

        $("#yuceId").val(yuceId);
    }

    var idx = 0;
    var color1 = "#FFFACD";
    var color2= "#FFA500";
    function changeColor() {
        var guas = $(".baGua");
        if (idx >= guas.length)
            idx = 0;
        if (idx > 0){
            guas[idx - 1].style.color = color1;
            guas[idx - 1].style.fontSize = "46px";
        }

        if (idx === 0) {
            guas[guas.length-1].style.color = color1;
            guas[guas.length-1].style.fontSize = "46px";
        }

        guas[idx].style.color = color2;
        guas[idx].style.fontSize = "48px";
        idx += 1;
    }

    function randomString(len) {
        len = len || 32;
        var $chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';
        var maxPos = $chars.length;
        var pwd = '';
        for (var i = 0; i < len; i++) {
            pwd += $chars.charAt(Math.floor(Math.random() * maxPos));
        }
        return pwd;
    }

    function checkMobile() {
        var wechat = $("#wechat").val();
        var mobile = $("#mobile").val();
        if (isNaN(mobile)) {
            alert("手机号貌似填错了......");
            $("#mobile").val("");
            $("#mobile").focus();
            return;
        }

        if (mobile.length === 11 && wechat.length >= 5) {
            $("#sureBtn").removeAttr("disabled");
        }else {
            $("#sureBtn").attr("disabled","disabled");
        }
    }
</script>

</body>
</html>
